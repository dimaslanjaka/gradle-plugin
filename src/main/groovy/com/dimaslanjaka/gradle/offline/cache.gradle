package com.dimaslanjaka.gradle.offline

task cacheLocal(type: Copy) {
    def home = System.properties['user.home']
    from new File(home as File, '.gradle/caches/modules-2/files-2.1')
    into "${project.buildDir}/artifactory"
    eachFile {
        List<String> parts = it.path.split('/' as Closure)
        it.path = (parts[0] + '/' + parts[1]).replace('.', '/') + '/' + parts[2] + '/' + parts[4]
    }
    includeEmptyDirs = false
}